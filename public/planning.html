<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Visionneur de Planning Gantt ‚Äî SmartCool Pro"
    />
    <title>Planning | SmartCool Pro</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/planning.css" />
  </head>
  <body>
    <script src="js/sidebar.js"></script>
    <script>
      window.si =
        window.si ||
        function () {
          (window.si.q = window.si.q || []).push(arguments);
        };
      window.si("analytics", "auto");
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>

    <main class="main-content">
      <!-- Header -->
      <header class="app-header">
        <div class="app-title">
          <h1>Planning Projet</h1>
          <span>SmartCool Pro</span>
        </div>
        <div class="header-actions">
          <button class="btn-tool" id="btn-example">
            <i class="fa-solid fa-rotate-right"></i> Recharger
          </button>
          <label class="btn-tool primary">
            <i class="fa-solid fa-upload"></i> Importer .GAN
            <input type="file" id="file-input" accept=".gan" hidden />
          </label>
        </div>
      </header>

      <!-- Toolbar -->
      <div class="toolbar">
        <div class="toolbar-group">
          <button class="btn-tool active" data-scale="day">Jours</button>
          <button class="btn-tool" data-scale="week">Semaines</button>
          <button class="btn-tool" data-scale="month">Mois</button>
        </div>

        <div class="toolbar-group">
          <select id="gantt-file-menu" style="display:none; height:32px; padding:0 12px; border-radius:6px; border:1px solid var(--border); font-size:0.85rem; background:white;">
          </select>
        </div>

        <div class="toolbar-group">
          <button class="btn-tool" id="btn-zoom-out">
            <i class="fa-solid fa-magnifying-glass-minus"></i>
          </button>
          <button class="btn-tool" id="btn-zoom-in">
            <i class="fa-solid fa-magnifying-glass-plus"></i>
          </button>
          <button class="btn-tool" id="btn-fit">
            <i class="fa-solid fa-compress"></i> Ajuster
          </button>
          <button class="btn-tool active" id="btn-toggle-weekend">
            <i class="fa-solid fa-calendar-week"></i> WE
          </button>
        </div>

        <div class="toolbar-group">
          <input
            type="text"
            class="search-input"
            placeholder="Filtrer les t√¢ches..."
            id="search"
          />
        </div>
      </div>

      <!-- Main Gantt Area -->
      <div class="gantt-container" id="gantt-container">
        <!-- Empty State -->
        <div class="empty-state" id="empty-state">
          <i class="fa-solid fa-chart-gantt empty-icon"></i>
          <div class="empty-text">Chargement du planning...</div>
          <button class="btn-tool primary" id="link-example" style="display:none;">
            Charger le planning par d√©faut
          </button>
        </div>

        <!-- Task List (Left) -->
        <div class="task-panel is-hidden" id="task-panel">
          <div class="task-header">
            <div>#</div>
            <div>ID</div>
            <div>Phase</div>
            <div>T√¢che</div>
            <div>Resp.</div>
            <div>Dur√©e</div>
          </div>
          <div class="task-list" id="task-list">
            <!-- JS Generated -->
          </div>
          <div class="resizer" id="resizer"></div>
        </div>

        <!-- Timeline (Right) -->
        <div class="timeline-panel is-hidden" id="timeline-panel">
          <div class="timeline-header-scroll" id="timeline-header">
            <div class="timeline-header-content" id="timeline-header-content">
              <!-- JS Generated -->
            </div>
          </div>
          <div class="timeline-body-scroll" id="timeline-body">
            <div class="timeline-grid" id="timeline-grid">
              <div class="grid-bg" id="grid-bg"></div>
              <div class="today-marker" id="today-marker">
                <div class="today-label">AUJ</div>
              </div>
              <!-- Bars JS Generated -->
            </div>
          </div>
        </div>
      </div>

      <div class="sheet-wrapper">
        <h2>Planning WBS D√©taill√©</h2>
        <a href="#" onclick="downloadCSV()" class="download-btn"
          >üì• T√©l√©charger le CSV (Compatible Excel/Sheets)</a
        >
        <div class="sheet-container">
          <table class="google-sheet-style">
            <thead>
              <tr>
                <th>#</th>
                <th>ID</th>
                <th>PHASE</th>
                <th>TACHE</th>
                <th>RESPONSABLE</th>
                <th>DEBUT</th>
                <th>FIN</th>
                <th>DUREE (J)</th>
                <th>LIVRABLE</th>
                <th>DEPENDANCE</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="row-num">1</td>
                <td>1.1</td>
                <td>Conception</td>
                <td>D√©finition des Specs Techniques</td>
                <td>CTO</td>
                <td>01/10/2025</td>
                <td>07/10/2025</td>
                <td>7</td>
                <td>Cahier des charges v1.0</td>
                <td>-</td>
              </tr>
              <tr>
                <td class="row-num">2</td>
                <td>1.2</td>
                <td>Conception</td>
                <td>S√©lection des composants cl√©s (BOM)</td>
                <td>Hardware Lead</td>
                <td>08/10/2025</td>
                <td>14/10/2025</td>
                <td>7</td>
                <td>BOM Preliminaire</td>
                <td>1.1</td>
              </tr>
              <tr>
                <td class="row-num">3</td>
                <td>1.3</td>
                <td>Conception</td>
                <td>Architecture Cloud (AWS)</td>
                <td>Cloud Architect</td>
                <td>08/10/2025</td>
                <td>14/10/2025</td>
                <td>7</td>
                <td>Diagramme d'architecture</td>
                <td>1.1</td>
              </tr>
              <tr>
                <td class="row-num">4</td>
                <td>2.1</td>
                <td>Hardware</td>
                <td>Sch√©matique PCB (Altium)</td>
                <td>Hardware Lead</td>
                <td>15/10/2025</td>
                <td>30/10/2025</td>
                <td>15</td>
                <td>Gerber Files v0.1</td>
                <td>1.2</td>
              </tr>
              <tr>
                <td class="row-num">5</td>
                <td>2.2</td>
                <td>Hardware</td>
                <td>Routage PCB (Placement)</td>
                <td>Hardware Lead</td>
                <td>31/10/2025</td>
                <td>07/11/2025</td>
                <td>7</td>
                <td>Fichiers de fab</td>
                <td>2.1</td>
              </tr>
              <tr>
                <td class="row-num">6</td>
                <td>2.3</td>
                <td>Hardware</td>
                <td>Fabrication PCB Alpha (JLCPCB)</td>
                <td>Externe</td>
                <td>08/11/2025</td>
                <td>15/11/2025</td>
                <td>7</td>
                <td>Cartes nues</td>
                <td>2.2</td>
              </tr>
              <tr>
                <td class="row-num">7</td>
                <td>2.4</td>
                <td>Hardware</td>
                <td>Assemblage & Bring-up (Test)</td>
                <td>Hardware Lead</td>
                <td>16/11/2025</td>
                <td>20/11/2025</td>
                <td>4</td>
                <td>PCB Fonctionnel</td>
                <td>2.3</td>
              </tr>
              <tr>
                <td class="row-num">8</td>
                <td>3.1</td>
                <td>Software</td>
                <td>Collecte Dataset (Photos frigo)</td>
                <td>Data Team</td>
                <td>15/10/2025</td>
                <td>01/11/2025</td>
                <td>16</td>
                <td>5000 images annot√©es</td>
                <td>1.1</td>
              </tr>
              <tr>
                <td class="row-num">9</td>
                <td>3.2</td>
                <td>Software</td>
                <td>Entrainement Mod√®le YOLOv8</td>
                <td>Data Scientist</td>
                <td>02/11/2025</td>
                <td>20/11/2025</td>
                <td>18</td>
                <td>Mod√®le .pt optimis√©</td>
                <td>3.1</td>
              </tr>
              <tr>
                <td class="row-num">10</td>
                <td>3.3</td>
                <td>Software</td>
                <td>D√©veloppement Firmware (C++)</td>
                <td>Embedded Dev</td>
                <td>15/10/2025</td>
                <td>30/11/2025</td>
                <td>45</td>
                <td>Firmware v0.5</td>
                <td>1.2</td>
              </tr>
              <tr>
                <td class="row-num">11</td>
                <td>3.4</td>
                <td>Software</td>
                <td>Int√©gration Mod√®le sur RPi5</td>
                <td>Embedded Dev</td>
                <td>01/12/2025</td>
                <td>10/12/2025</td>
                <td>10</td>
                <td>Inf√©rence < 200ms</td>
                <td>2.4, 3.2</td>
              </tr>
              <tr>
                <td class="row-num">12</td>
                <td>4.1</td>
                <td>Indus</td>
                <td>Design M√©canique 3D (Boitier)</td>
                <td>Mech Eng</td>
                <td>15/11/2025</td>
                <td>15/12/2025</td>
                <td>30</td>
                <td>Fichiers STEP</td>
                <td>2.2</td>
              </tr>
              <tr>
                <td class="row-num">13</td>
                <td>4.2</td>
                <td>Indus</td>
                <td>Lancement Outillage (Moules)</td>
                <td>Acheteur</td>
                <td>01/01/2026</td>
                <td>28/02/2026</td>
                <td>58</td>
                <td>Moules Acier T1</td>
                <td>4.1</td>
              </tr>
              <tr>
                <td class="row-num">14</td>
                <td>4.3</td>
                <td>Certif</td>
                <td>Pr√©-scan EMC (Compatibilit√©)</td>
                <td>Labo Interne</td>
                <td>15/12/2025</td>
                <td>20/12/2025</td>
                <td>5</td>
                <td>Rapport de test</td>
                <td>2.4</td>
              </tr>
              <tr>
                <td class="row-num">15</td>
                <td>4.4</td>
                <td>Certif</td>
                <td>Certification Finale CE</td>
                <td>TUV Lab</td>
                <td>01/03/2026</td>
                <td>30/03/2026</td>
                <td>30</td>
                <td>Certificat CE</td>
                <td>4.2</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Footer -->
      <footer class="app-footer">
        <div>SmartCool Intranet - Module Planning</div>
        <div>¬© 2025 SmartCool Inc.</div>
      </footer>
    </main>

    <div class="gantt-tooltip" id="tooltip"></div>

    <!-- Edit Modal -->
    <div class="modal-overlay is-hidden" id="edit-modal">
      <div class="modal">
        <div class="modal-header">
          <h3>D√©tails de la t√¢che</h3>
          <button class="btn-icon" onclick="closeModal()">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="edit-id" />
          <div class="form-group">
            <label>Nom de la t√¢che</label>
            <input type="text" class="form-input" id="edit-name" />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Date de d√©but</label>
              <input type="date" class="form-input" id="edit-start" />
            </div>
            <div class="form-group">
              <label>Dur√©e (jours)</label>
              <input type="number" class="form-input" id="edit-duration" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Avancement (%)</label>
              <input
                type="number"
                min="0"
                max="100"
                class="form-input"
                id="edit-progress"
              />
            </div>
            <div class="form-group">
              <label>Co√ªt (‚Ç¨)</label>
              <input type="number" class="form-input" id="edit-cost" />
            </div>
          </div>
          <div class="form-group">
            <label>Ressources & Charge (%)</label>
            <div class="resources-list" id="edit-resources-list">
              <!-- JS Generated -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-tool" onclick="closeModal()">Annuler</button>
          <button class="btn-tool primary" onclick="saveTask()">
            Enregistrer
          </button>
        </div>
      </div>
    </div>
    <script src="js/planning.js"></script>
  </body>
</html>
