<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Visionneur de Planning Gantt — SmartCool Pro"
    />
    <title>Planning | SmartCool Pro</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/planning.css" />
  </head>
  <body>
    <script src="js/sidebar.js"></script>
    <script>
      window.si =
        window.si ||
        function () {
          (window.si.q = window.si.q || []).push(arguments);
        };
      window.si("analytics", "auto");
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>

    <main class="main-content">
      <!-- Header -->
      <header class="app-header">
        <div class="app-title">
          <h1>Planning Projet</h1>
          <span>SmartCool Pro</span>
        </div>
        <div class="header-actions">
          <button class="btn-tool" id="btn-reload">
            <i class="fa-solid fa-rotate-right"></i> Recharger
          </button>
        </div>
      </header>

      <!-- Toolbar -->
      <div class="toolbar">
        <div class="toolbar-group">
          <button class="btn-tool active" data-scale="day">Jours</button>
          <button class="btn-tool" data-scale="week">Semaines</button>
          <button class="btn-tool" data-scale="month">Mois</button>
        </div>

        <div class="toolbar-group">
          <button class="btn-tool" id="btn-zoom-out">
            <i class="fa-solid fa-magnifying-glass-minus"></i>
          </button>
          <button class="btn-tool" id="btn-zoom-in">
            <i class="fa-solid fa-magnifying-glass-plus"></i>
          </button>
          <button class="btn-tool" id="btn-fit">
            <i class="fa-solid fa-compress"></i> Ajuster
          </button>
          <button class="btn-tool active" id="btn-toggle-weekend">
            <i class="fa-solid fa-calendar-week"></i> WE
          </button>
          <button class="btn-tool active" id="btn-toggle-deps">
            <i class="fa-solid fa-diagram-project"></i> Dépendances
          </button>
        </div>

        <div class="toolbar-group">
          <input
            type="text"
            class="search-input"
            placeholder="Filtrer les tâches..."
            id="search"
          />
        </div>
      </div>

      <!-- Phase Legend -->
      <div class="phase-legend">
        <div class="legend-item">
          <span class="legend-color" style="background: #3b82f6;"></span>
          <span class="legend-label">Conception</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #10b981;"></span>
          <span class="legend-label">Hardware</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #8b5cf6;"></span>
          <span class="legend-label">Software</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #f59e0b;"></span>
          <span class="legend-label">Indus & Certif</span>
        </div>
      </div>

      <!-- Main Gantt Area -->
      <div class="gantt-container" id="gantt-container">
        <!-- Empty State -->
        <div class="empty-state" id="empty-state">
          <i class="fa-solid fa-chart-gantt empty-icon"></i>
          <div class="empty-text">Chargement du planning...</div>
          <button
            class="btn-tool primary"
            id="link-example"
            style="display: none"
          >
            Charger le planning par défaut
          </button>
        </div>

        <!-- Task List (Left) -->
        <div class="task-panel is-hidden" id="task-panel">
          <div class="task-header">
            <div>#</div>
            <div>ID</div>
            <div>Phase</div>
            <div>Tâche</div>
            <div>Resp.</div>
            <div>Durée</div>
          </div>
          <div class="task-list" id="task-list">
            <!-- JS Generated -->
          </div>
          <div class="resizer" id="resizer"></div>
        </div>

        <!-- Timeline (Right) -->
        <div class="timeline-panel is-hidden" id="timeline-panel">
          <div class="timeline-header-scroll" id="timeline-header">
            <div class="timeline-header-content" id="timeline-header-content">
              <!-- JS Generated -->
            </div>
          </div>
          <div class="timeline-body-scroll" id="timeline-body">
            <div class="timeline-grid" id="timeline-grid">
              <div class="grid-bg" id="grid-bg"></div>
              <div class="today-marker" id="today-marker">
                <div class="today-label">AUJ</div>
              </div>
              <!-- Bars JS Generated -->
            </div>
          </div>
        </div>
      </div>

      <section class="risks-wrapper" id="risk-section">
        <div class="risks-header">
          <div>
            <p class="risks-eyebrow">Risques clés</p>
            <h2 class="risks-title">Synthèse transposée</h2>
          </div>
        </div>
        <div class="risk-grid" id="risk-grid"></div>
      </section>

      <!-- Footer -->
      <footer class="app-footer">
        <div>SmartCool Intranet - Module Planning</div>
        <div>© 2025 SmartCool Inc.</div>
      </footer>
    </main>

    <div class="gantt-tooltip" id="tooltip"></div>

    <!-- Edit Modal -->
    <div class="modal-overlay is-hidden" id="edit-modal">
      <div class="modal">
        <div class="modal-header">
          <h3>Détails de la tâche</h3>
          <button class="btn-icon" onclick="closeModal()">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="edit-id" />
          <div class="form-group">
            <label>Nom de la tâche</label>
            <input type="text" class="form-input" id="edit-name" />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Date de début</label>
              <input type="date" class="form-input" id="edit-start" />
            </div>
            <div class="form-group">
              <label>Durée (jours)</label>
              <input type="number" class="form-input" id="edit-duration" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Avancement (%)</label>
              <input
                type="number"
                min="0"
                max="100"
                class="form-input"
                id="edit-progress"
              />
            </div>
            <div class="form-group">
              <label>Coût (€)</label>
              <input type="number" class="form-input" id="edit-cost" />
            </div>
          </div>
          <div class="form-group">
            <label>Ressources & Charge (%)</label>
            <div class="resources-list" id="edit-resources-list">
              <!-- JS Generated -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-tool" onclick="closeModal()">Annuler</button>
          <button class="btn-tool primary" onclick="saveTask()">
            Enregistrer
          </button>
        </div>
      </div>
    </div>
    <script src="js/planning.js"></script>
  </body>
</html>
